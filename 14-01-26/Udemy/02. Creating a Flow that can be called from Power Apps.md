
# Section 2 ‚Äì Creating a Flow That Can Be Called from Power Apps

## Goal of This Section

Get hands-on with the **simplest possible Power Apps ‚Üî Power Automate integration**, focusing on **core mechanics**, not business logic.

We intentionally build a **Hello World‚Äìstyle solution** to:

* Remove complexity
* Highlight fundamentals that remain valid throughout the course

---

## Step 1 ‚Äì Creating & Testing a Flow Callable from Power Apps

### Design Philosophy

* Keep the flow **as simple as possible**
* Emphasize **concepts over solution depth**
* Treat this as a **unit-testable function**, not a full workflow

---

### What We Are Building

```
[Power Apps Button]
        |
        v
[Instant Power Automate Flow]
        |
        v
[Send Email Action]
```

* No parameters
* No return values
* Pure ‚Äúcommand execution‚Äù

---

### Creating the Flow

1. Go to **flow.microsoft.com**
2. Click **Create**
3. Choose **Instant cloud flow**
4. Click **Skip** (do NOT select a trigger yet)

‚ö†Ô∏è **Important (Post‚ÄìNov 2023 Change)**
You‚Äôll land in the **Modern Designer** by default.

#### Why We Switch to Classic Designer

* Modern Designer is incomplete
* Unexpected behavior
* Not used anywhere in this course

‚úÖ **Rule for the entire course**

> Always switch to **Classic Designer**

```
‚ãÆ (Three dots) ‚Üí Switch to Classic Designer
```

---

### Adding the Trigger

Search for **Power Apps** ‚Üí choose:

‚úÖ **Power Apps (V2)**
‚ùå Ignore the legacy Power Apps trigger

> Power Apps V2 is the only correct choice going forward.

---

### Naming the Flow

Example:

```
Hello World Demo 01
```

At this point:

* The flow is **not valid yet**
* A flow requires:

  * **One trigger**
  * **At least one action**

---

### Adding an Action

Add:

```
Send an email (V2)
```

Example values:

* To: yourself
* Subject: `Hello World Power Apps`
* Body: `This is a demo. Please disregard üôÇ`

Now:

* Flow is complete
* Flow is callable from Power Apps
* Flow accepts **no parameters**

---

### Key Concept: What Makes a Flow Callable from Power Apps?

```
IF Trigger == Power Apps (V2)
THEN Flow is callable from Power Apps
```

That‚Äôs it. No magic beyond that.

---

### Testing the Flow (Without Power Apps)

Why test independently?

* Separate teams often build:

  * Power Apps
  * Power Automate
* Flows must be **unit-testable**

Steps:

1. Click **Test**
2. Choose **Manually**
3. Confirm Outlook connector
4. Run Flow

Result:

* Email is sent
* Flow runs successfully
* Power Apps not involved at all

‚úÖ Independent validation achieved

---

## Step 2 ‚Äì Creating a Power Apps App That Calls the Flow

### App Creation

1. Go to **powerapps.microsoft.com**
2. Create ‚Üí **Canvas App**
3. Choose **Tablet layout**

   * More space
   * Easier demos

Example name:

```
Hello Power Automate 01
```

Save the app (Ctrl + S).

---

### App State at This Point

* Blank screen
* No controls
* No logic

That‚Äôs expected.

---

### Adding UI to Trigger the Flow

#### Screen

Rename screen:

```
SCR_HelloWorldFlow
```

#### Button

Insert ‚Üí Button
Rename:

```
BTN_CallFlow
```

Text:

```
Call Flow
```

---

### Connecting Power Apps to the Flow

With the button selected:

1. Go to **Action**
2. Choose **Power Automate**
3. Select the flow: `Hello World Demo 01`

What happens backstage:

* Power Apps creates a **connector** to the flow
* A callable function becomes available

Generated formula (simplified):

```
HelloWorldDemo01.Run()
```

No parameters ‚Üí just `.Run()`

---

### Testing from Power Apps

1. Run the app
2. Click **Call Flow**
3. Check mailbox ‚Üí email received

---

### Verifying Execution Source

In **Power Automate ‚Üí Flow History**:

* Manual test runs show:

  ```
  Status: Test Succeeded
  ```

* Power Apps‚Äìtriggered runs show:

  ```
  Status: Succeeded
  ```

This distinction helps in:

* Debugging
* Identifying execution source

---

## Section 2 ‚Äì Key Takeaways (Important)

### 1Ô∏è‚É£ Always Use Power Apps (V2) Trigger

* Legacy trigger = obsolete
* V2 = current + supported
* Use V2 in **every single flow**

---

### 2Ô∏è‚É£ Power Apps Flows Are Instant Flows

Characteristics:

* Manually triggered
* Executed by **end users**
* Subject to **run-only user permissions**

Why this matters:

* Security
* Access control
* Deployment planning

(Deep dive later in the course)

---

### 3Ô∏è‚É£ Environment & Tenancy Must Match

üö´ You **cannot**:

* Call a flow in a different environment
* Call a flow in a different tenant

‚úÖ You **must**:

* Build Power Apps and Flow in:

  * Same tenant
  * Same environment

```
[Power Apps - Dev Env] ‚ùå ‚Üí [Flow - Prod Env]
[Power Apps - Dev Env] ‚úÖ ‚Üí [Flow - Dev Env]
```

This directly impacts:

* ALM
* Packaging
* Deployment strategy

---

## Big Picture Recap Diagram

```
[Power Apps App]
     |
     |  (Button Click)
     v
[Power Apps (V2) Trigger]
     |
     v
[Instant Flow]
     |
     v
[Action: Send Email]
```

---

## What I‚Äôve Learned (Section 2)

* How to create a **callable Power Automate flow**
* Why **Power Apps (V2)** trigger is mandatory
* How to **unit-test flows independently**
* How Power Apps discovers flows via environment
* How execution history differs between:

  * Manual test
  * Power Apps invocation
* Why **environment alignment is non-negotiable**

---

#
